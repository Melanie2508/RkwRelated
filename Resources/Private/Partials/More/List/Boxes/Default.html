{namespace rkwRelated=RKW\RkwRelated\ViewHelpers}
{namespace rkwAuthors=RKW\RkwAuthors\ViewHelpers}

<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">
	<div class="flex-item">
		<div class="tile">
			<f:if condition="{pages.txRkwbasicsTeaserImage}" >
				<div class="tile__header has-img">
					<div class="tile__img">
						<f:cObject typoscriptObjectPath="lib.txRkwRelated.responsiveImageThumbnail" data="{pages.txRkwbasicsTeaserImage.uid}"/>
					</div>
				</div>
			</f:if>
			<div class="tile__content">
				<h3 class="tile__title icon">
					<span class="tile__title-icon tile__title-icon--margin">
						<f:comment>
							<f:if condition="{pages.txRkwbasicsDocumentType.uid}">
								ToDo: Switch for icon based on DocumentType
							</f:if>
						</f:comment>
						<svg class="icon icon--32"><use xlink:href="#ic-document" /></svg>
					</span>
					<span class="tile__title-text">
						<f:if condition="<rkwRelated:pageTranslateProperty pageUid='{pages.uid}' dbField='title' sysLanguageUid='{sysLanguageUid}' />">
							<f:then>
								<f:format.crop maxCharacters="{settingsArray.headerCrop}" respectWordBoundaries="false"><rkwRelated:pageTranslateProperty pageUid='{pages.uid}' dbField='title' sysLanguageUid='{sysLanguageUid}' /></f:format.crop>
							</f:then>
							<f:else>
								<f:format.crop maxCharacters="{settingsArray.headerCrop}" respectWordBoundaries="false">{pages.title}</f:format.crop>
							</f:else>
						</f:if>
					</span>
				</h3>
				<div class="tile__text">
					<p>
						<f:if condition="<rkwRelated:pageTranslateProperty pageUid='{pages.uid}' dbField='txRkwbasicsTeaserText' sysLanguageUid='{sysLanguageUid}' />">
							<f:then>
								<f:format.crop maxCharacters="{settingsArray.contentCrop}" respectWordBoundaries="false"><rkwRelated:pageTranslateProperty pageUid='{pages.uid}' dbField='txRkwbasicsTeaserText' sysLanguageUid='{sysLanguageUid}' /></f:format.crop>
							</f:then>
							<f:else>
								<f:format.crop maxCharacters="{settingsArray.contentCrop}" respectWordBoundaries="false">{pages.txRkwbasicsTeaserText}</f:format.crop>
							</f:else>
						</f:if>
					</p>
				</div>
			</div>
			<div class="tile__footer tile__contact">
				<div class="tile__contact-text">
					<svg class="icon icon--16"><use xlink:href="#ic-date" /></svg><f:format.date format="d.m.Y">{pages.lastUpdated}</f:format.date>
				</div>

				<f:if condition="{pages.txRkwauthorsAuthorship}">
					<f:if condition="{pages.txRkwauthorsAuthorship} == 1">
						<f:then>
							<div class="tile__footer-author">
								<f:translate key="partials.more.list.boxes.default.byAuthor" extensionName="RkwRelated" />
								&nbsp;<rkwAuthors:GetCombinedName author="{pages.txRkwauthorsAuthorship.0}"/>
							</div>
						</f:then>
						<f:else>
							<div class="tile__footer-author">v
								<f:translate key="partials.more.list.boxes.default.severalAuthors" extensionName="RkwRelated" />
							</div>
						</f:else>
					</f:if>
				</f:if>
			</div>
			<f:link.page pageUid="{pages.uid}" class="tile__link-overlay" target="{f:if(condition: '{settingsArray.openLinksInSameWindow}', then: '', else: '_blank')}" title="{pages.title}">
				{pages.title}
			</f:link.page>
		</div>
	</div>
</html>
